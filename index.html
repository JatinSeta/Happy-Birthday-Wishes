<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Birthday Celebration</title>

<!-- Google Font -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Satisfy&display=swap" rel="stylesheet">

<style>
/* =========================
   GLOBAL RESET & BASE
========================= */
*,
*::before,
*::after {
    box-sizing: border-box;
}

html, body {
    width: 100%;
    height: 100%;
}

body {
    margin: 0;
    font-family: Arial, sans-serif;
    text-align: center;

    min-height: 100svh; /* mobile-safe viewport */
    background: linear-gradient(to bottom, #ff9a9e, #fad0c4);

    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;

    overflow-x: hidden;
    overflow-y: hidden;
}

/* =========================
   HEADINGS & TEXT
========================= */
#happyText {
    display: none;
    font-family: 'Satisfy', cursive;
    font-size: clamp(2rem, 8vw, 4rem);
    color: #fff;
    text-shadow: 3px 3px 8px rgba(0,0,0,0.4);
    margin-bottom: 0.5rem;
}

#blowText {
    margin-top: 1rem;
    color: #fff;
    font-size: clamp(1rem, 4vw, 1.4rem);
    text-shadow: 1px 1px 4px black;
}

#birthdayMessage {
    display: none;
    margin-top: 1rem;
    max-width: 90vw;
    font-size: clamp(1rem, 4vw, 1.4rem);
    color: white;
    text-shadow: 1px 1px 4px black;
    line-height: 1.6;
    white-space: pre-line;
    text-align: left;
}

/* =========================
   CAKE (START SCREEN)
========================= */
.cake {
    cursor: pointer;
    animation: rock 4s ease-in-out infinite;
}

.cake img {
    width: clamp(180px, 60vw, 320px);
    height: auto;
}

/* Cake rocking animation */
@keyframes rock {
    0%   { transform: rotate(0deg); }
    25%  { transform: rotate(5deg); }
    50%  { transform: rotate(0deg); }
    75%  { transform: rotate(-5deg); }
    100% { transform: rotate(0deg); }
}

/* =========================
   BIRTHDAY IMAGE BOX
========================= */
#birthdayBox {
    display: none;
    width: min(90vw, 420px);
    aspect-ratio: 1 / 1;

    background-image: url('./img/cake 2.png');
    background-repeat: no-repeat;
    background-position: center;
    background-size: contain;

    position: relative;
    z-index: 5;
}

#birthdayImg {
    position: absolute;
    width: 70%;
    height: 70%;
    object-fit: contain;

    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

/* =========================
   NOT TODAY MESSAGE
========================= */
#notToday {
    display: none;
    margin-top: 2rem;
    font-size: clamp(1.2rem, 5vw, 2rem);
    color: white;
    text-shadow: 2px 2px 5px black;
}

/* =========================
   BALLOONS
========================= */
#balloonContainer {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 2;
}

.emoji-balloon {
    position: absolute;
    bottom: -100px;
    font-size: clamp(2rem, 6vw, 6rem);

    animation: floatUp linear forwards;
    user-select: none;
    pointer-events: auto;
    cursor: pointer;

    transition: transform 0.2s ease;
}

@keyframes floatUp {
    from {
        transform: translateY(0) translateX(0);
        opacity: 1;
    }
    to {
        transform: translateY(-120vh) translateX(var(--drift));
        opacity: 0.9;
    }
}

.pop {
    animation: popAnim 0.3s forwards;
}

@keyframes popAnim {
    0%   { transform: scale(1); opacity: 1; }
    50%  { transform: scale(1.5); opacity: 0.7; }
    100% { transform: scale(0); opacity: 0; }
}

/* =========================
   CONFETTI
========================= */
#confettiContainer {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 1;
    overflow: hidden;
}

.confetti {
    position: absolute;
    width: 8px;
    height: 8px;
    opacity: 0.9;
    animation: fall linear forwards;
}

@keyframes fall {
    0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
    }
    100% {
        transform: translateY(120vh) rotate(360deg);
        opacity: 0.9;
    }
}

/* =========================
   RESPONSIVE BREAKPOINTS
========================= */

/* Tablets */
@media (min-width: 768px) {
    #birthdayMessage {
        max-width: 600px;
    }
}

/* Large screens */
@media (min-width: 1200px) {
    body {
        padding-top: 2rem;
    }
}

</style>
</head>

<body>

<div id="confettiContainer"></div>
<div id="balloonContainer"></div>

<div class="cake" id="initialCake">
    <img src="./img/cake.png" alt="Initial Cake">
</div>

<p id="blowText"> Click the cake to celebrate!</p>

<h1 id="happyText">Happy Birthday</h1>
<div id="birthdayBox">
    <img id="birthdayImg" alt="Birthday Person">
</div>
<p id="birthdayMessage"></p> <!-- Birthday message will appear here -->

<div id="notToday"></div>

<audio id="popSound" src="./sound/pop.mp3"></audio>
<audio id="happySound" src="./img/HappyBirthdaySong.mp3" loop></audio>

<script>
// ===== USERS =====
const users = [
    { name: "Vanta Ben || Nane Ben", dob: "2003-01-08", img: "./img/VantaBen.png" }
];

const today = new Date();
let birthdayUser = null;

// ===== SETTINGS =====
const balloonsPerMinute = 15;
const balloonsInterval = 10000 / balloonsPerMinute;
const confettiPerSecond = 10;
const confettiLimit = 250;

function createEmojiBalloon() {
    const balloon = document.createElement("div");
    balloon.className = "emoji-balloon";
    balloon.textContent = "ðŸŽˆ";

    const hue = Math.floor(Math.random() * 360);
    balloon.style.filter = `hue-rotate(${hue}deg)`;
    balloon.style.left = Math.random() * 100 + "vw";
    balloon.style.animationDuration = Math.random() * 5 + 6 + "s";
    balloon.style.setProperty("--drift", (Math.random() * 100 - 50) + "px");

    document.getElementById("balloonContainer").appendChild(balloon);

    balloon.addEventListener("click", () => {
        balloon.classList.add("pop");
        document.getElementById("popSound").currentTime = 0;
        document.getElementById("popSound").play();
        setTimeout(() => balloon.remove(), 300);
    });

    setTimeout(() => balloon.remove(), 12000);
}

function createConfetti() {
    const container = document.getElementById("confettiContainer");
    if (container.childElementCount >= confettiLimit) return;

    const confetti = document.createElement("div");
    confetti.className = "confetti";

    const colors = ["#ff4d6d", "#ffd166", "#4cc9f0", "#c77dff", "#80ed99"];
    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
    confetti.style.left = Math.random() * 100 + "vw";

    const size = Math.random() * 6 + 6;
    confetti.style.width = size + "px";
    confetti.style.height = size + "px";
    confetti.style.animationDuration = Math.random() * 3 + 3 + "s";

    container.appendChild(confetti);

    setTimeout(() => confetti.remove(), 4000);
}

document.getElementById("initialCake").addEventListener("click", () => {
    document.getElementById("initialCake").style.display = "none";
    document.getElementById("blowText").style.display = "none";

    users.forEach(user => {
        const dob = new Date(user.dob);
        if (today.getDate() === dob.getDate() && today.getMonth() === dob.getMonth()) {
            birthdayUser = user;
        }
    });

    if (birthdayUser) {
        document.getElementById("happyText").style.display = "block";
        document.getElementById("birthdayBox").style.display = "block";
        document.getElementById("birthdayImg").src = birthdayUser.img;

        // ===== CUSTOM MESSAGE =====
        const birthdayMessage = document.getElementById("birthdayMessage");
        birthdayMessage.style.display = "block";
        birthdayMessage.innerText = `Happy Birthday! \n
         àª­àª—àªµàª¾àª¨ àª¤àª¨à«‡ àª¹àª‚àª®à«‡àª¶àª¾ àª¸à«àªµàª¸à«àª¥, àª–à«àª¶ àª…àª¨à«‡ àª¸àª«àª³ àª°àª¾àª–à«‡.\n
         àª¤àª¾àª°àª¾ àª¬àª§àª¾ àª¸àªªàª¨àª¾àª“ àªªà«‚àª°àª¾àª‚ àª¥àª¾àª¯ àª…àª¨à«‡ àª¤àª¾àª°à«‹ àª¦àª°à«‡àª• àª¦àª¿àªµàª¸ àª†àª¨àª‚àª¦àª¥à«€ àª­àª°à«‡àª²à«‹ àª°àª¹à«‡.\n`;

        // ===== PLAY LOOPING HAPPY BIRTHDAY SONG =====
        const happyAudio = document.getElementById("happySound");
        happyAudio.currentTime = 0;
        happyAudio.play();

        // ===== BALLOONS AND CONFETTI =====
        setInterval(createEmojiBalloon, balloonsInterval);
        setInterval(() => {
            for (let i = 0; i < confettiPerSecond; i++) createConfetti();
        }, 100);

    } else {
        const notToday = document.getElementById("notToday");
        notToday.style.display = "block";
        notToday.innerText = "âŒ Sorry, today is not anyoneâ€™s birthday";
    }
});
</script>

</body>
</html>
